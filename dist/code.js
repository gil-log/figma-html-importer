"use strict";(function(){var $=Object.defineProperty,j=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var B=function(r,e,t){return e in r?$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},C=function(r,e){for(var t in e||(e={}))X.call(e,t)&&B(r,t,e[t]);if(E)for(var t of E(e))q.call(e,t)&&B(r,t,e[t]);return r},v=function(r,e){return j(r,J(e))};figma.showUI(__html__,{width:400,height:580,themeColors:!0});function T(r){if(!r||r==="transparent"||r==="none")return null;let e=r.match(/^rgba?\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)$/);return e?{rgb:{r:parseFloat(e[1])/255,g:parseFloat(e[2])/255,b:parseFloat(e[3])/255},a:e[4]!==void 0?parseFloat(e[4]):1}:null}function D(r){if(!r||r==="transparent"||r==="none"||r==="")return!0;let e=T(r);return e!==null&&e.a<.01}function N(r){let e=T(r);return!e||e.a<.01?null:{type:"SOLID",color:e.rgb,opacity:e.a}}var H={inter:"Inter",roboto:"Roboto","open sans":"Open Sans","noto sans":"Noto Sans",lato:"Lato",montserrat:"Montserrat",poppins:"Poppins",nunito:"Nunito",raleway:"Raleway",ubuntu:"Ubuntu","source sans pro":"Source Sans Pro","playfair display":"Playfair Display",merriweather:"Merriweather",georgia:"Georgia","times new roman":"Times New Roman","courier new":"Courier New","roboto mono":"Roboto Mono","source code pro":"Source Code Pro","fira code":"Fira Code","jetbrains mono":"JetBrains Mono","noto sans kr":"Noto Sans KR","noto sans cjk kr":"Noto Sans KR","apple sd gothic neo":"Noto Sans KR","malgun gothic":"Noto Sans KR",nanumgothic:"Noto Sans KR","nanum gothic":"Noto Sans KR","sans-serif":"Inter",serif:"Merriweather",monospace:"Roboto Mono","system-ui":"Inter","-apple-system":"Inter",blinkmacsystemfont:"Inter","segoe ui":"Inter","helvetica neue":"Inter",helvetica:"Inter",arial:"Inter","apple system":"Inter"};function V(r){let e=r.split(",").map(function(t){return t.trim().replace(/['"]/g,"").toLowerCase()});for(let t of e)if(H[t])return H[t];return"Inter"}function Z(r,e){let t=parseInt(r)||400,o="Regular";return t>=900?o="Black":t>=800?o="ExtraBold":t>=700?o="Bold":t>=600?o="SemiBold":t>=500?o="Medium":t>=300?o="Light":t>=200?o="ExtraLight":t>=100&&(o="Thin"),e?o+" Italic":o}async function Q(r,e){let t=[{family:r,style:e},{family:r,style:e.replace(" Italic","")},{family:r,style:"Regular"},{family:"Inter",style:"Regular"}];for(let o of t)try{return await figma.loadFontAsync(o),o}catch(n){}throw new Error("Cannot load any font")}function Y(r){if(!r||r==="none")return null;let e=r.match(/(-?[\d.]+)px\s+(-?[\d.]+)px\s+([\d.]+)px(?:\s+(-?[\d.]+)px)?\s+(rgba?\([^)]+\)|#[\da-fA-F]{3,8})/);if(!e)return null;let t=T(e[5]);return t?{type:"DROP_SHADOW",color:v(C({},t.rgb),{a:t.a}),offset:{x:parseFloat(e[1]),y:parseFloat(e[2])},radius:parseFloat(e[3]),spread:parseFloat(e[4]||"0"),visible:!0,blendMode:"NORMAL"}:null}function tt(r){let e=[],t=0,o=0;for(let n=0;n<r.length;n++)r[n]==="("?t++:r[n]===")"?t--:r[n]===","&&t===0&&(e.push(r.slice(o,n).trim()),o=n+1);return e.push(r.slice(o).trim()),e}function et(r){var a;let e=r.match(/^linear-gradient\(([\s\S]+)\)$/i);if(!e)return null;let t=tt(e[1]);if(t.length<2)return null;let o=180,n=0,l=t[0].trim();if(/deg$/i.test(l))o=parseFloat(l),n=1;else if(/^to\s/i.test(l)){let i=l.toLowerCase();i==="to top"?o=0:i==="to right"?o=90:i==="to bottom"?o=180:i==="to left"?o=270:i==="to top right"?o=45:i==="to bottom right"?o=135:i==="to bottom left"?o=225:i==="to top left"&&(o=315),n=1}let y=o*Math.PI/180,f=Math.cos(y),x=Math.sin(y),g=[[x,f,.5*(1-x)],[-f,x,.5*(1+f)]],p=t.slice(n),d=[];for(let i=0;i<p.length;i++){let R=p[i].trim(),S=R.match(/(.+?)\s+([\d.]+)%\s*$/),h,F;S?(h=S[1].trim(),F=parseFloat(S[2])/100):(h=R,F=i/Math.max(p.length-1,1));let I=(a=T(h))!=null?a:ot(h);I&&d.push({position:F,color:v(C({},I.rgb),{a:I.a})})}return d.length<2?null:{type:"GRADIENT_LINEAR",gradientTransform:g,gradientStops:d,opacity:1}}function ot(r){let e=r.trim().match(/^#([\da-fA-F]{3,8})$/);if(!e)return null;let t=e[1];return t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length===6&&(t+="ff"),t.length!==8?null:{rgb:{r:parseInt(t.slice(0,2),16)/255,g:parseInt(t.slice(2,4),16)/255,b:parseInt(t.slice(4,6),16)/255},a:parseInt(t.slice(6,8),16)/255}}function z(r,e){let{borderTopLeftRadius:t,borderTopRightRadius:o,borderBottomRightRadius:n,borderBottomLeftRadius:l}=e;t===o&&o===n&&n===l?t>0&&(r.cornerRadius=Math.round(t)):(r.topLeftRadius=Math.round(t),r.topRightRadius=Math.round(o),r.bottomRightRadius=Math.round(n),r.bottomLeftRadius=Math.round(l))}function rt(r,e){let t=Math.max(e.borderTopWidth,e.borderRightWidth,e.borderBottomWidth,e.borderLeftWidth);if(t<=0||e.borderStyle==="none"||D(e.borderColor))return;let o=N(e.borderColor);if(!o)return;r.strokes=[o],r.strokeAlign="INSIDE",e.borderTopWidth===e.borderRightWidth&&e.borderRightWidth===e.borderBottomWidth&&e.borderBottomWidth===e.borderLeftWidth?r.strokeWeight=t:(r.strokeTopWeight=e.borderTopWidth,r.strokeRightWeight=e.borderRightWidth,r.strokeBottomWeight=e.borderBottomWidth,r.strokeLeftWeight=e.borderLeftWidth)}function it(r,e){let t=Y(e.boxShadow);t&&(r.effects=[t])}function L(r,e){let t=[];if(e.backgroundImage&&e.backgroundImage!=="none"&&e.backgroundImage!==""){let o=et(e.backgroundImage);if(o)t=[o];else{let n=N(e.backgroundColor);n&&(t=[n])}}else{let o=N(e.backgroundColor);o&&(t=[o])}r.fills=t,z(r,e),e.opacity<1&&(r.opacity=e.opacity),rt(r,e),it(r,e),r.clipsContent=!1}var b=0,M=0;async function U(r,e){let{rect:t,style:o,tagName:n,text:l,children:y,visible:f,imageUrl:x}=r,g=Math.max(t.width,1),p=Math.max(t.height,1);if(l&&y.length===0){let a=V(o.fontFamily),i=o.fontStyle==="italic"||o.fontStyle==="oblique",R=Z(o.fontWeight,i),S=await Q(a,R),h=function(s,m,u=0){var A;let c=figma.createText();c.fontName=S,c.fontSize=Math.max(o.fontSize,1),c.characters=l;let k=N(o.color);k&&(c.fills=[k]);let K={left:"LEFT",center:"CENTER",right:"RIGHT",justify:"JUSTIFIED"};c.textAlignHorizontal=(A=K[o.textAlign])!=null?A:"LEFT";let w=parseFloat(o.lineHeight);!isNaN(w)&&w>0&&o.lineHeight!=="normal"&&(c.lineHeight={value:Math.round(w),unit:"PIXELS"});let P=parseFloat(o.letterSpacing);return!isNaN(P)&&o.letterSpacing!=="normal"&&o.letterSpacing!=="0px"&&(c.letterSpacing={value:P,unit:"PIXELS"}),u>0?(c.textAutoResize="HEIGHT",c.resize(Math.max(u,10),20)):c.textAutoResize="WIDTH_AND_HEIGHT",c.x=s,c.y=m,c},I=Math.max(o.borderTopWidth,o.borderRightWidth,o.borderBottomWidth,o.borderLeftWidth)>0&&o.borderStyle!=="none"&&!D(o.borderColor),G=!D(o.backgroundColor)||o.backgroundImage!==""&&o.backgroundImage!=="none",_=function(s){var u;let m=o.fontSize*((u=l==null?void 0:l.length)!=null?u:1);return s>m*1.5?s:0};if(I||G){let s=figma.createFrame();s.name=n,s.resize(g,p),s.x=t.x,s.y=t.y,L(s,o);let m=Math.max(g-o.paddingLeft-o.paddingRight,10),u=h(o.paddingLeft,o.paddingTop,m);f||(s.visible=!1),s.appendChild(u),e.appendChild(s),b++,M++;return}if(o.textAlign==="center"||o.textAlign==="right"){let s=h(0,t.y,0);if(o.textAlign==="center"){let m=t.x+t.width/2;s.x=Math.round(m-s.width/2)}else s.x=Math.round(t.x+t.width-s.width);f||(s.visible=!1),e.appendChild(s),M++;return}let O=/^(block|flex|grid|list-item|table)/.test(o.display)?_(g):0,W=h(t.x,t.y,O);f||(W.visible=!1),e.appendChild(W),M++;return}if(n==="svg"){if(r.svgHtml)try{let i=figma.createNodeFromSvg(r.svgHtml);i.name="svg-icon",i.fills=[],(Math.abs(i.width-g)>1||Math.abs(i.height-p)>1)&&i.resize(g,p),i.x=t.x,i.y=t.y,o.opacity<1&&(i.opacity=o.opacity),f||(i.visible=!1),e.appendChild(i),b++;return}catch(i){}let a=figma.createRectangle();a.name="svg-placeholder",a.resize(g,p),a.fills=[{type:"SOLID",color:{r:.7,g:.7,b:.7},opacity:.4}],o.opacity<1&&(a.opacity=o.opacity),a.x=t.x,a.y=t.y,f||(a.visible=!1),e.appendChild(a);return}if(n==="img"){let a=figma.createRectangle();a.name=x?"img":"img (placeholder)",a.resize(g,p),a.fills=[{type:"SOLID",color:{r:.88,g:.9,b:.92}}],z(a,o),a.x=t.x,a.y=t.y,f||(a.visible=!1),e.appendChild(a),b++;return}let d=figma.createFrame();d.name=n,d.resize(g,p),d.x=t.x,d.y=t.y,L(d,o);for(let a of y)try{await U(a,d)}catch(i){console.error("[html-importer] buildTree error:",i)}f||(d.visible=!1),e.appendChild(d),b++}figma.ui.onmessage=async function(r){var e;if(r.type==="import-dom"){b=0,M=0;try{let t=r.data,o=figma.createFrame();o.name="HTML Import",o.resize(Math.max(t.rect.width,1),Math.max(t.rect.height,1)),L(o,t.style),figma.currentPage.appendChild(o),o.x=Math.round(figma.viewport.center.x-o.width/2),o.y=Math.round(figma.viewport.center.y-o.height/2);for(let n of t.children)try{await U(n,o)}catch(l){console.error("[html-importer] child error:",l)}figma.currentPage.selection=[o],figma.viewport.scrollAndZoomIntoView([o]),figma.ui.postMessage({type:"import-done",frameCount:b,textCount:M})}catch(t){figma.ui.postMessage({type:"import-error",error:(e=t.message)!=null?e:String(t)})}}};})();
