"use strict";(function(){var Z=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var G=function(r,t,e){return t in r?Z(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e},E=function(r,t){for(var e in t||(t={}))tt.call(t,e)&&G(r,e,t[e]);if(z)for(var e of z(t))et.call(t,e)&&G(r,e,t[e]);return r},W=function(r,t){return Q(r,Y(t))};figma.showUI(__html__,{width:400,height:580,themeColors:!0});function C(r){if(!r||r==="transparent"||r==="none")return null;let t=r.match(/^rgba?\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)$/);if(t)return{rgb:{r:parseFloat(t[1])/255,g:parseFloat(t[2])/255,b:parseFloat(t[3])/255},a:t[4]!==void 0?parseFloat(t[4]):1};if(t=r.match(/^rgba?\(\s*([\d.]+)\s+([\d.]+)\s+([\d.]+)(?:\s*\/\s*([\d.]+%?))?\s*\)$/),t){let e=1;return t[4]!==void 0&&(e=t[4].endsWith("%")?parseFloat(t[4])/100:parseFloat(t[4])),{rgb:{r:parseFloat(t[1])/255,g:parseFloat(t[2])/255,b:parseFloat(t[3])/255},a:e}}if(t=r.match(/^color\(srgb\s+([\d.]+)\s+([\d.]+)\s+([\d.]+)(?:\s*\/\s*([\d.]+%?))?\s*\)$/),t){let e=1;return t[4]!==void 0&&(e=t[4].endsWith("%")?parseFloat(t[4])/100:parseFloat(t[4])),{rgb:{r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])},a:e}}return null}function B(r){if(!r||r==="transparent"||r==="none"||r==="")return!0;let t=C(r);return t!==null&&t.a<.01}function T(r){let t=C(r);return!t||t.a<.01?null:{type:"SOLID",color:t.rgb,opacity:t.a}}var U={inter:"Inter",roboto:"Roboto","open sans":"Open Sans","noto sans":"Noto Sans",lato:"Lato",montserrat:"Montserrat",poppins:"Poppins",nunito:"Nunito",raleway:"Raleway",ubuntu:"Ubuntu","source sans pro":"Source Sans Pro","playfair display":"Playfair Display",merriweather:"Merriweather",georgia:"Georgia","times new roman":"Times New Roman","courier new":"Courier New","roboto mono":"Roboto Mono","source code pro":"Source Code Pro","fira code":"Fira Code","jetbrains mono":"JetBrains Mono",pretendard:"Pretendard","pretendard variable":"Pretendard","noto sans kr":"Noto Sans KR","noto sans cjk kr":"Noto Sans KR","apple sd gothic neo":"Noto Sans KR","malgun gothic":"Noto Sans KR",nanumgothic:"Noto Sans KR","nanum gothic":"Noto Sans KR","sans-serif":"Inter",serif:"Merriweather",monospace:"Roboto Mono","system-ui":"Inter","-apple-system":"Inter",blinkmacsystemfont:"Inter","segoe ui":"Inter","helvetica neue":"Inter",helvetica:"Inter",arial:"Inter","apple system":"Inter"};function ot(r){let t=r.split(",").map(function(e){return e.trim().replace(/['"]/g,"").toLowerCase()});for(let e of t)if(U[e])return U[e];return"Inter"}function K(r,t){let e=parseInt(r)||400,o="Regular";return e>=900?o="Black":e>=800?o="ExtraBold":e>=700?o="Bold":e>=600?o="SemiBold":e>=500?o="Medium":e>=300?o="Light":e>=200?o="ExtraLight":e>=100&&(o="Thin"),t?o+" Italic":o}var rt=new Set(["Pretendard","Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic","NanumGothic"]);async function O(r,t){let e=[{family:r,style:t}],o=t.replace("SemiBold","Semi Bold").replace("ExtraBold","Extra Bold").replace("ExtraLight","Extra Light");o!==t&&e.push({family:r,style:o});let i=t.replace("Semi Bold","SemiBold").replace("Extra Bold","ExtraBold").replace("Extra Light","ExtraLight");i!==t&&e.push({family:r,style:i}),e.push({family:r,style:t.replace(" Italic","")},{family:r,style:"Regular"}),r!=="Noto Sans KR"&&rt.has(r)&&e.push({family:"Noto Sans KR",style:t},{family:"Noto Sans KR",style:t.replace(" Italic","")},{family:"Noto Sans KR",style:"Regular"}),e.push({family:"Inter",style:"Regular"});for(let f of e)try{return await figma.loadFontAsync(f),f}catch(b){}throw new Error("Cannot load any font")}function it(r){if(!r||r==="none")return null;let t=r.match(/(-?[\d.]+)px\s+(-?[\d.]+)px\s+([\d.]+)px(?:\s+(-?[\d.]+)px)?\s+(rgba?\([^)]+\)|#[\da-fA-F]{3,8})/);if(!t)return null;let e=C(t[5]);return e?{type:"DROP_SHADOW",color:W(E({},e.rgb),{a:e.a}),offset:{x:parseFloat(t[1]),y:parseFloat(t[2])},radius:parseFloat(t[3]),spread:parseFloat(t[4]||"0"),visible:!0,blendMode:"NORMAL"}:null}function at(r){let t=[],e=0,o=0;for(let i=0;i<r.length;i++)r[i]==="("?e++:r[i]===")"?e--:r[i]===","&&e===0&&(t.push(r.slice(o,i).trim()),o=i+1);return t.push(r.slice(o).trim()),t}function nt(r){var S;let t=r.match(/^linear-gradient\(([\s\S]+)\)$/i);if(!t)return null;let e=at(t[1]);if(e.length<2)return null;let o=180,i=0,f=e[0].trim();if(/deg$/i.test(f))o=parseFloat(f),i=1;else if(/^to\s/i.test(f)){let g=f.toLowerCase();g==="to top"?o=0:g==="to right"?o=90:g==="to bottom"?o=180:g==="to left"?o=270:g==="to top right"?o=45:g==="to bottom right"?o=135:g==="to bottom left"?o=225:g==="to top left"&&(o=315),i=1}let b=o*Math.PI/180,y=Math.cos(b),u=Math.sin(b),L=[[u,y,.5*(1-u)],[-y,u,.5*(1+y)]],p=e.slice(i),h=[];for(let g=0;g<p.length;g++){let m=p[g].trim(),a=m.match(/(.+?)\s+([\d.]+)%\s*$/),c,M;a?(c=a[1].trim(),M=parseFloat(a[2])/100):(c=m,M=g/Math.max(p.length-1,1));let I=(S=C(c))!=null?S:st(c);I&&h.push({position:M,color:W(E({},I.rgb),{a:I.a})})}return h.length<2?null:{type:"GRADIENT_LINEAR",gradientTransform:L,gradientStops:h,opacity:1}}function st(r){let t=r.trim().match(/^#([\da-fA-F]{3,8})$/);if(!t)return null;let e=t[1];return e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length===6&&(e+="ff"),e.length!==8?null:{rgb:{r:parseInt(e.slice(0,2),16)/255,g:parseInt(e.slice(2,4),16)/255,b:parseInt(e.slice(4,6),16)/255},a:parseInt(e.slice(6,8),16)/255}}function _(r,t){let{borderTopLeftRadius:e,borderTopRightRadius:o,borderBottomRightRadius:i,borderBottomLeftRadius:f}=t;e===o&&o===i&&i===f?e>0&&(r.cornerRadius=Math.round(e)):(r.topLeftRadius=Math.round(e),r.topRightRadius=Math.round(o),r.bottomRightRadius=Math.round(i),r.bottomLeftRadius=Math.round(f))}function lt(r,t){let e=Math.max(t.borderTopWidth,t.borderRightWidth,t.borderBottomWidth,t.borderLeftWidth);if(e<=0||t.borderStyle==="none"||B(t.borderColor))return;let o=T(t.borderColor);if(!o)return;r.strokes=[o],r.strokeAlign="INSIDE",t.borderTopWidth===t.borderRightWidth&&t.borderRightWidth===t.borderBottomWidth&&t.borderBottomWidth===t.borderLeftWidth?r.strokeWeight=e:(r.strokeTopWeight=t.borderTopWidth,r.strokeRightWeight=t.borderRightWidth,r.strokeBottomWeight=t.borderBottomWidth,r.strokeLeftWeight=t.borderLeftWidth)}function ct(r,t){let e=it(t.boxShadow);e&&(r.effects=[e])}function P(r,t){let e=[];if(t.backgroundImage&&t.backgroundImage!=="none"&&t.backgroundImage!==""){let o=nt(t.backgroundImage);if(o)e=[o];else{let i=T(t.backgroundColor);i&&(e=[i])}}else{let o=T(t.backgroundColor);o&&(e=[o])}r.fills=e,_(r,t),t.opacity<1&&(r.opacity=t.opacity),lt(r,t),ct(r,t),r.clipsContent=t.overflow==="hidden"||t.overflow==="clip"}var F=0,R=0;async function $(r,t){let{rect:e,style:o,tagName:i,text:f,textSegments:b,children:y,visible:u,imageUrl:L}=r,p=Math.max(e.width,1),h=Math.max(e.height,1);if(f&&y.length===0){let a=ot(o.fontFamily),c=o.fontStyle==="italic"||o.fontStyle==="oblique",M=K(o.fontWeight,c),I=await O(a,M),N=function(n,s,d=0){var H;let l=figma.createText();l.fontName=I,l.fontSize=Math.max(o.fontSize,1),l.characters=f;let x=T(o.color);x&&(l.fills=[x]);let V={left:"LEFT",center:"CENTER",right:"RIGHT",justify:"JUSTIFIED"};l.textAlignHorizontal=(H=V[o.textAlign])!=null?H:"LEFT";let v=parseFloat(o.lineHeight);!isNaN(v)&&v>0&&o.lineHeight!=="normal"&&(l.lineHeight={value:Math.round(v),unit:"PIXELS"});let A=parseFloat(o.letterSpacing);return!isNaN(A)&&o.letterSpacing!=="normal"&&o.letterSpacing!=="0px"&&(l.letterSpacing={value:A,unit:"PIXELS"}),o.textDecoration.includes("underline")?l.textDecoration="UNDERLINE":o.textDecoration.includes("line-through")&&(l.textDecoration="STRIKETHROUGH"),d>0?(l.textAutoResize="HEIGHT",l.resize(Math.max(d,10),20)):l.textAutoResize="WIDTH_AND_HEIGHT",l.x=n,l.y=s,l},w=async function(n){if(!b||b.length===0)return;let s=0;for(let d of b){let l=d.text.length;if(l>0&&s+l<=n.characters.length){if(d.bold){let x=await O(a,K("700",c));n.setRangeFontName(s,s+l,x)}if(d.color){let x=T(d.color);x&&n.setRangeFills(s,s+l,[x])}}s+=l}},j=Math.max(o.borderTopWidth,o.borderRightWidth,o.borderBottomWidth,o.borderLeftWidth)>0&&o.borderStyle!=="none"&&!B(o.borderColor),J=!B(o.backgroundColor)||o.backgroundImage!==""&&o.backgroundImage!=="none",k=h<o.fontSize*3.5,X=function(n){var d;let s=o.fontSize*((d=f==null?void 0:f.length)!=null?d:1);return n>s*1.5?n:0};if(j||J){let n=figma.createFrame();if(n.name=i,n.resize(p,h),n.x=e.x,n.y=e.y,P(n,o),k){let s=N(o.paddingLeft,o.paddingTop,0);await w(s);let d=o.display.includes("flex");(d&&o.justifyContent==="center"||o.textAlign==="center")&&(s.x=Math.round((p-s.width)/2)),(d&&o.alignItems==="center"||i==="button"||i==="a")&&(s.y=Math.round((h-s.height)/2)),n.appendChild(s)}else{let s=Math.max(p-o.paddingLeft-o.paddingRight,10),d=N(o.paddingLeft,o.paddingTop,s);await w(d),(o.display.includes("flex")&&o.alignItems==="center"||i==="button"||i==="a")&&(d.y=Math.round((h-d.height)/2)),n.appendChild(d)}u||(n.visible=!1),t.appendChild(n),F++,R++;return}if(o.textAlign==="center"||o.textAlign==="right"){let n=N(0,e.y,0);if(await w(n),o.textAlign==="center"){let s=e.x+e.width/2;n.x=Math.round(s-n.width/2)}else n.x=Math.round(e.x+e.width-n.width);u||(n.visible=!1),t.appendChild(n),R++;return}if(k){let n=N(e.x,e.y,0);await w(n),u||(n.visible=!1),t.appendChild(n),R++;return}let q=/^(block|flex|grid|list-item|table)/.test(o.display)?X(p):0,D=N(e.x,e.y,q);await w(D),u||(D.visible=!1),t.appendChild(D),R++;return}if(i==="svg"){if(r.svgHtml)try{let c=figma.createNodeFromSvg(r.svgHtml);c.name="svg-icon",c.fills=[],(Math.abs(c.width-p)>1||Math.abs(c.height-h)>1)&&c.resize(p,h),c.x=e.x,c.y=e.y,o.opacity<1&&(c.opacity=o.opacity),u||(c.visible=!1),t.appendChild(c),F++;return}catch(c){}let a=figma.createRectangle();a.name="svg-placeholder",a.resize(p,h),a.fills=[{type:"SOLID",color:{r:.7,g:.7,b:.7},opacity:.4}],o.opacity<1&&(a.opacity=o.opacity),a.x=e.x,a.y=e.y,u||(a.visible=!1),t.appendChild(a);return}if(i==="img"){let a=figma.createRectangle();a.name=L?"img":"img (placeholder)",a.resize(p,h),a.fills=[{type:"SOLID",color:{r:.88,g:.9,b:.92}}],_(a,o),a.x=e.x,a.y=e.y,u||(a.visible=!1),t.appendChild(a),F++;return}let S=p,g=h;for(let a of y)g=Math.max(g,a.rect.y+a.rect.height),S=Math.max(S,a.rect.x+a.rect.width);let m=figma.createFrame();m.resize(S,g),m.x=e.x,m.y=e.y,P(m,o);for(let a of y)try{await $(a,m)}catch(c){console.error("[html-importer] buildTree error:",c)}u||(m.visible=!1),t.appendChild(m),m.name=i,F++}figma.ui.onmessage=async function(r){var t;if(r.type==="import-dom"){F=0,R=0;try{let e=r.data,o=figma.createFrame();o.name="HTML Import",o.resize(Math.max(e.rect.width,1),Math.max(e.rect.height,1)),P(o,e.style),figma.currentPage.appendChild(o),o.x=Math.round(figma.viewport.center.x-o.width/2),o.y=Math.round(figma.viewport.center.y-o.height/2);for(let i of e.children)try{await $(i,o)}catch(f){console.error("[html-importer] child error:",f)}figma.currentPage.selection=[o],figma.viewport.scrollAndZoomIntoView([o]),figma.ui.postMessage({type:"import-done",frameCount:F,textCount:R})}catch(e){figma.ui.postMessage({type:"import-error",error:(t=e.message)!=null?t:String(e)})}}};})();
